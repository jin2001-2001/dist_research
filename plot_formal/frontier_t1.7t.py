import matplotlib.pyplot as plt
import numpy as np
import matplotlib.pyplot as plt

def pareto_frontier(xs, ys):
    points = sorted(zip(xs, ys))  # sort by x ascending
    frontier = []
    best_y = float('inf')
    for x, y in points:
        if y < best_y:
            frontier.append((x, y))
            best_y = y
    return zip(*frontier)

#x =  [37.38174273858921, 31.57894736842105, 25.423728813559322, 25.423728813559322, 37.24920534011443, 37.38174273858921, 31.57894736842105, 38.01472908995266, 39.02395447326628, 39.10595744680851, 37.24920534011443, 36.32118644067797, 33.79858156028369, 34.729468599033815, 37.38174273858921, 32.644755244755245, 37.24920534011443, 34.559006211180126, 36.32118644067797, 31.677725118483412, 36.32118644067797, 38.17734408145948, 35.91820224719101, 35.9952805453592, 37.24920534011443, 52.88945362134689, 47.69790382244143, 51.1611030478955, 49.450244698205545, 47.72050816696915, 58.05156136528686, 56.32667876588022, 52.20258935083881, 50.682257244534824, 62.317241379310346, 63.213165572574766, 61.491087668243, 59.130237620170504, 59.10047152702212, 61.390583903208835, 63.213165572574766, 60.82257476294676, 64.06969619606842, 64.20478868129875, 85.77635945876946, 62.30183203337566, 62.37676093634149, 62.48340425531915, 62.514420460729184, 62.37676093634149]
#y =  [45.461465785281185, 60.678935361891895, 71.21408920522121, 71.21408920522121, 145.23501555344785, 45.461465785281185, 60.678935361891895, 193.88209066108718, 193.28857792734, 144.83452249260867, 145.23501555344785, 145.4352620838674, 145.9769762529089, 145.77672972248934, 45.461465785281185, 154.10076167549343, 145.23501555344785, 153.63621394922984, 145.4352620838674, 154.33303553862524, 145.4352620838674, 145.03476902302825, 236.70968419388115, 195.06911612858153, 145.23501555344785, 140.6479643218604, 149.23994616183944, 140.6799916545726, 140.7120189872848, 140.74404631999704, 140.55188232372376, 140.58390965643596, 238.08356149713566, 238.97621836282758, 52.012678051130095, 140.45580032558715, 140.48782765829935, 228.86655904500992, 228.89858637772213, 181.59433390313637, 140.45580032558715, 221.19013453953454, 328.1982593778937, 228.86655904500992, 327.8370205072783, 288.1874076871169, 287.96217914365866, 228.89858637772215, 228.86655904500992, 287.96217914365866]

# alpha = 0.1
ox1 =  [31.30,45.91836734693877, 45.91836734693877, 49.8232044198895, 38.69722557297949, 36.99590163934426, 44.033096926713945, 42.6475, 49.8232044198895, 37.6125, 36.99590163934426, 42.098130841121495, 48.66447368421053, 49.8232044198895, 44.27631205673759, 36.99590163934426, 45.365256124721604, 44.033096926713945, 37.6125, 49.8232044198895, 36.99590163934426, 45.91836734693877, 38.33069620253165, 48.89219330855018, 38.80657894736842, 36.99590163934426, 45.91836734693877, 38.33069620253165, 48.89219330855018, 37.6125, 36.99590163934426, 45.91836734693877, 38.33069620253165, 48.89219330855018, 39.394892840857274, 36.99590163934426, 45.564476885644766, 49.8232044198895, 37.6125, 46.81255093724531, 36.99590163934426, 42.098130841121495, 48.66447368421053, 51.724137931034484, 37.6125, 36.99590163934426, 45.91836734693877, 48.66447368421053, 47.60617059891107, 49.8232044198895, 36.99590163934426, 45.91836734693877, 38.33069620253165, 48.89219330855018, 37.6125, 36.99590163934426, 45.91836734693877, 45.91836734693877, 48.66447368421053, 37.6125]
oy1 =  [129,59.701116047893585, 59.701116047893585, 52.391409294137446, 64.32150416754763, 63.977149484733445, 47.8368889237016, 48.65301133976114, 52.391409294137446, 73.86609974516153, 63.977149484733445, 58.29715651827424, 49.62461939889759, 52.391409294137446, 66.56169535647246, 63.977149484733445, 46.9721621959068, 47.8368889237016, 73.86609974516153, 52.391409294137446, 63.977149484733445, 59.701116047893585, 63.7326463832396, 48.100039879617, 66.24224024773113, 63.977149484733445, 59.701116047893585, 63.7326463832396, 48.100039879617, 73.86609974516153, 63.977149484733445, 59.701116047893585, 63.7326463832396, 48.100039879617, 72.01645488717483, 63.977149484733445, 49.10015131421333, 52.391409294137446, 73.86609974516153, 62.120075341398966, 63.977149484733445, 58.29715651827424, 49.62461939889759, 55.518166841231476, 73.86609974516153, 63.977149484733445, 59.701116047893585, 49.62461939889759, 50.09137733195763, 52.391409294137446, 63.977149484733445, 59.701116047893585, 63.7326463832396, 48.100039879617, 73.86609974516153, 63.977149484733445, 59.701116047893585, 59.701116047893585, 49.62461939889759, 73.86609974516153]
x1 =[]
y1=[]
for i in range(len(ox1)):
    if ox1[i]<37.27 and ox1[i]!=31.30:
        continue
    x1.append(ox1[i])
    y1.append(oy1[i])

# alpha = 0.5
ox2 =  [36.99590163934426, 45.564476885644766, 48.65432098765432, 53.58008658008658, 51.00896860986547, 55.99170124481328, 36.99590163934426, 45.564476885644766, 51.00896860986547, 36.99590163934426, 45.365256124721604, 42.098130841121495, 36.99590163934426, 51.00896860986547, 55.99170124481328, 61.646186440677965, 55.99170124481328, 36.99590163934426, 64.21967213114755, 48.65432098765432, 53.58008658008658, 44.24547803617571, 36.99590163934426, 45.564476885644766, 48.65432098765432, 48.65432098765432, 53.58008658008658, 36.99590163934426, 55.99170124481328, 51.00896860986547, 36.99590163934426, 55.99170124481328, 53.58008658008658, 41.73186119873817, 51.00896860986547, 36.99590163934426, 48.65432098765432, 53.58008658008658, 36.99590163934426, 45.564476885644766, 44.033096926713945, 51.00896860986547, 42.6475, 55.99170124481328, 36.99590163934426, 36.99590163934426, 51.00896860986547, 55.99170124481328, 66.90491803278688, 36.99590163934426, 41.223684210526315, 60.69508196721311, 55.99170124481328, 48.65432098765432, 42.6475, 45.564476885644766, 55.99170124481328, 51.00896860986547, 42.098130841121495, 65.01639344262296]
oy2 =  [63.977149484733445, 49.10015131421333, 39.91574727845063, 33.097781238025576, 33.333757975746806, 32.835263060847986, 63.977149484733445, 49.10015131421333, 33.333757975746806, 63.977149484733445, 46.9721621959068, 58.29715651827424, 63.977149484733445, 33.333757975746806, 32.835263060847986, 26.403508891473777, 32.835263060847986, 63.977149484733445, 25.242132853390697, 39.91574727845063, 33.097781238025576, 49.64892743456562, 63.977149484733445, 49.10015131421333, 39.91574727845063, 39.91574727845063, 33.097781238025576, 63.977149484733445, 32.835263060847986, 33.333757975746806, 63.977149484733445, 32.835263060847986, 33.097781238025576, 46.0583431828012, 33.333757975746806, 63.977149484733445, 39.91574727845063, 33.097781238025576, 63.977149484733445, 49.10015131421333, 47.8368889237016, 33.333757975746806, 48.65301133976114, 32.835263060847986, 63.977149484733445, 63.977149484733445, 33.333757975746806, 32.835263060847986, 25.242132853390697, 63.977149484733445, 49.421592358303556, 25.23160584498124, 32.835263060847986, 39.91574727845063, 48.65301133976114, 49.10015131421333, 32.835263060847986, 33.333757975746806, 58.29715651827424, 25.242132853390697]
x2 =[]
y2=[]
for i in range(len(ox2)):
    if ox2[i]<37.27 or (ox2[i]<62 and ox2[i]>61):
        continue
    x2.append(ox2[i])
    y2.append(oy2[i])


# alpha = 1
x3 =  [53.58008658008658, 65.00887573964496, 51.00896860986547, 55.99170124481328, 65.17704918032787, 53.58008658008658, 62.75739644970414, 51.00896860986547, 62.032786885245905, 55.99170124481328, 53.58008658008658, 62.75739644970414, 51.00896860986547, 62.032786885245905, 55.99170124481328, 53.58008658008658, 62.75739644970414, 51.00896860986547, 62.032786885245905, 55.99170124481328, 53.58008658008658, 62.75739644970414, 51.00896860986547, 55.99170124481328, 83.91723100075245, 53.58008658008658, 62.75739644970414, 51.00896860986547, 55.99170124481328, 60.219905213270145, 55.99170124481328, 62.75739644970414, 60.434322033898304, 53.58008658008658, 51.00896860986547, 53.58008658008658, 62.75739644970414, 51.00896860986547, 62.032786885245905, 55.99170124481328, 61.57988165680474, 53.58008658008658, 51.00896860986547, 55.99170124481328, 62.75739644970414, 53.58008658008658, 65.01639344262296, 55.99170124481328, 51.00896860986547, 64.5344262295082, 53.58008658008658, 62.75739644970414, 51.00896860986547, 62.032786885245905, 55.99170124481328, 53.58008658008658, 62.75739644970414, 51.00896860986547, 55.99170124481328, 89.01028342111863]
y3 =  [33.097781238025576, 25.209360875627983, 33.333757975746806, 32.835263060847986, 25.44049076680117, 33.097781238025576, 25.209360875627983, 33.333757975746806, 25.44049076680117, 32.835263060847986, 33.097781238025576, 25.209360875627983, 33.333757975746806, 25.44049076680117, 32.835263060847986, 33.097781238025576, 25.209360875627983, 33.333757975746806, 25.44049076680117, 32.835263060847986, 33.097781238025576, 25.209360875627983, 33.333757975746806, 32.835263060847986, 31.28849590777914, 33.097781238025576, 25.209360875627983, 33.333757975746806, 32.835263060847986, 37.39645490764754, 32.835263060847986, 25.209360875627983, 26.403508891473777, 33.097781238025576, 33.333757975746806, 33.097781238025576, 25.209360875627983, 33.333757975746806, 25.44049076680117, 32.835263060847986, 25.198901438063913, 33.097781238025576, 33.333757975746806, 32.835263060847986, 25.209360875627983, 33.097781238025576, 25.242132853390697, 32.835263060847986, 33.333757975746806, 25.44049076680117, 33.097781238025576, 25.209360875627983, 33.333757975746806, 25.44049076680117, 32.835263060847986, 33.097781238025576, 25.209360875627983, 33.333757975746806, 32.835263060847986, 31.311262379530955]
fig = plt.figure(figsize=(8,6))
c = ["#90C9E7", "#ff7f0e", "#0D6783"]

X = np.concatenate([x1, x2, x3])
Y = np.concatenate([y1, y2, y3])

# ---- Compute the frontier ----
fx1, fy1 = pareto_frontier(x1, y1)
# ---- Plot the frontier curve ----
plt.plot(fx1, fy1, color=c[0], linewidth=1, marker='o', label=r"$\alpha$ = 0.1")
# ---- Compute the frontier ----
fx2, fy2 = pareto_frontier(x2, y2)
# ---- Plot the frontier curve ----
plt.plot(fx2, fy2, color=c[1], linewidth=1, marker='o', label=r"$\alpha$ = 0.5")
# ---- Compute the frontier ----
fx3, fy3 = pareto_frontier(x3, y3)
# ---- Plot the frontier curve ----
plt.plot(fx3, fy3, color=c[2], linewidth=1, marker='o', label=r"$\alpha$ = 1")





# ---- Compute the frontier ----
fx, fy = pareto_frontier(X, Y)
# ---- Plot the frontier curve ----
plt.plot(fx, fy, color='black', linewidth=1.5,linestyle='--',  dashes=(12, 8),label=" overall Frontier")


# **This is the missing line**

plt.scatter(x1, y1, s=20, color=c[0], alpha=0.1, rasterized=True)
plt.scatter(x2, y2, s=20, color=c[1], alpha=0.1, rasterized=True)
plt.scatter(x3, y3, s=20, color=c[2], alpha=0.1, rasterized=True)

plt.xlabel("Time latency (s)", fontsize=14)
plt.ylabel("Energy consumption (J)", fontsize=14)
plt.title("", fontsize=16)
plt.grid(True, linestyle='--', alpha=0.3)

plt.xlim(30, 70)
#plt.ylim(80, 180)

plt.legend(loc="upper right")

plt.tight_layout()
plt.show()
fig.savefig("ablation1_1.pdf", dpi=300)
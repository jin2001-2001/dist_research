import matplotlib.pyplot as plt
import numpy as np
import matplotlib.pyplot as plt

def pareto_frontier(xs, ys):
    points = sorted(zip(xs, ys))  # sort by x ascending
    frontier = []
    best_y = float('inf')
    for x, y in points:
        if y < best_y:
            frontier.append((x, y))
            best_y = y
    return zip(*frontier)

#x =  [37.38174273858921, 31.57894736842105, 25.423728813559322, 25.423728813559322, 37.24920534011443, 37.38174273858921, 31.57894736842105, 38.01472908995266, 39.02395447326628, 39.10595744680851, 37.24920534011443, 36.32118644067797, 33.79858156028369, 34.729468599033815, 37.38174273858921, 32.644755244755245, 37.24920534011443, 34.559006211180126, 36.32118644067797, 31.677725118483412, 36.32118644067797, 38.17734408145948, 35.91820224719101, 35.9952805453592, 37.24920534011443, 52.88945362134689, 47.69790382244143, 51.1611030478955, 49.450244698205545, 47.72050816696915, 58.05156136528686, 56.32667876588022, 52.20258935083881, 50.682257244534824, 62.317241379310346, 63.213165572574766, 61.491087668243, 59.130237620170504, 59.10047152702212, 61.390583903208835, 63.213165572574766, 60.82257476294676, 64.06969619606842, 64.20478868129875, 85.77635945876946, 62.30183203337566, 62.37676093634149, 62.48340425531915, 62.514420460729184, 62.37676093634149]
#y =  [45.461465785281185, 60.678935361891895, 71.21408920522121, 71.21408920522121, 145.23501555344785, 45.461465785281185, 60.678935361891895, 193.88209066108718, 193.28857792734, 144.83452249260867, 145.23501555344785, 145.4352620838674, 145.9769762529089, 145.77672972248934, 45.461465785281185, 154.10076167549343, 145.23501555344785, 153.63621394922984, 145.4352620838674, 154.33303553862524, 145.4352620838674, 145.03476902302825, 236.70968419388115, 195.06911612858153, 145.23501555344785, 140.6479643218604, 149.23994616183944, 140.6799916545726, 140.7120189872848, 140.74404631999704, 140.55188232372376, 140.58390965643596, 238.08356149713566, 238.97621836282758, 52.012678051130095, 140.45580032558715, 140.48782765829935, 228.86655904500992, 228.89858637772213, 181.59433390313637, 140.45580032558715, 221.19013453953454, 328.1982593778937, 228.86655904500992, 327.8370205072783, 288.1874076871169, 287.96217914365866, 228.89858637772215, 228.86655904500992, 287.96217914365866]

# alpha = 0.1
ox1 =  [207.26678141135972, 197.68662131519275, 203.25886990801578, 213.04599211563732, 215.12564543889846, 161.58675078864354, 219.5631067961165, 168.93693693693695, 203.73366013071896, 209.4861678004535, 171.954128440367, 186.2097902097902, 178.06906906906906, 224.09468085106383, 232.69019607843137, 205.15357142857144, 213.5080568720379, 287.65442764578836, 229.2397590361446, 228.9812091503268, 216.6449704142012, 221.51694915254237, 254.9933471933472, 247.06320166320165, 230.0392156862745, 236.98104265402844, 223.6045751633987, 241.70558882235528, 245.80938123752495, 254.53513513513514, 245.76590436590436, 236.14460784313727, 250.46141282155983, 245.60678642714572, 249.42090818363275, 246.71686746987953, 245.6477093206951, 244.9567089755213, 245.12125748502993, 263.76971046770603, 256.74565560821486, 266.44, 258.9901960784314, 412.0804315841099, 258.9024096385542, 274.11143451143454, 276.94236526946105, 274.52941176470586, 274.85421686746986, 275.086887835703]
oy1 =  [ 164.42168268434335, 176.96046559744278, 176.59951355264712, 176.59951355264712, 173.44730153769808, 159.81985624942735, 145.60227429099498, 173.33045967892562, 181.624466278031, 182.70897801856512, 171.89997909805763, 153.33697824674238, 154.41878317562362, 189.83384512761012, 190.07300753198203, 120.09885018477577, 118.78370897480801, 173.69101637005753, 131.02436382711767, 134.40709139797065, 98.36131828835492, 90.22664357571057, 130.20242545959832, 133.9636165631984, 130.6458660058713, 97.67684353102348, 130.64590029437056, 136.41462315273847, 135.65893389076945, 133.96365085169765, 126.4990508417772, 126.93900252801743, 147.79444922500875, 143.39864011275, 143.11816755186504, 97.36359702115882, 116.82188457457671, 138.84045155394662, 130.7106514012404, 143.33185534389406, 97.76431235270633, 110.58563051644907, 118.01263791612925, 160.40106825266162, 119.27496532744685, 96.37775938941542, 131.2965044428227, 96.86332985459461, 97.24182767584097, 97.51461682485728]
x1 =[]
y1=[]
for i in range(len(ox1)):
    if (ox1[i]>221.5 and ox1[i]<221.75) or (ox1[i]>216.6 and ox1[i]<216.8):
        continue
    x1.append(ox1[i])
    y1.append(oy1[i])

# alpha = 0.5
ox2 =  [189.41949152542372, 202.48453608247422, 206.73048327137548, 208.93975903614458, 206.9422680412371, 218.2065527065527, 217.3034188034188, 210.47424511545293, 210.52037914691942, 213.64312267657994, 214.99285714285713, 198.09765625, 203.4408163265306, 216.2479338842975, 212.4585764294049, 217.6590163934426, 223.87999001996008, 227.9762808349146, 225.8510479041916, 223.9768283852281, 227.11697247706422, 216.5, 242.16821971554683, 237.89870259481037, 242.99575848303394, 221.8771186440678, 221.51694915254237, 245.3102261553589, 221.8575, 234.26987710057688, 225.5241379310345, 242.41008276899925, 243.1897738446411, 241.65339233038347, 239.46705286024618, 246.71686746987953, 245.6477093206951, 361.8871287128713, 247.05055292259084, 251.42011537496865, 268.2841530054645, 256.0416666666667, 265.008316008316, 256.74565560821486, 256.4385542168675, 274.11143451143454, 274.85421686746986, 279.4228121927237, 274.925, 274.52941176470586]
oy2 =  [158.29757069472618, 141.65577602247618, 138.4948485832872, 159.25251748750298, 141.86825562549873, 131.55465979380017, 131.64274827045315, 153.0760911705621, 134.07928201670867, 138.7446581249103, 97.90799327706364, 98.03254979402605, 98.07856579956744, 124.90357922534994, 116.5585897488875, 98.26257701424787, 123.64603364579418, 112.03197413583605, 122.51383427451637, 108.21765036814782, 98.16988297514985, 98.22088986154003, 112.29191903976212, 106.53272713346841, 107.26139858826468, 90.22530193341561, 90.22664357571057, 116.33522187943747, 97.07163660669713, 106.09401363568071, 90.94885808987237, 104.63825300902505, 109.70026166220501, 108.8943127276805, 112.90546946552791, 97.36359702115882, 116.82188457457671, 136.73465653506227, 97.76277925176063, 112.12880321496402, 87.70998063607848, 96.94453667045124, 96.41835858460655, 97.76431235270633, 97.4054470639027, 96.37775938941542, 97.24182767584097, 109.09063783658169, 97.31816409036716, 96.86332985459461]
x2 =[]
y2=[]
for i in range(len(ox2)):
    if 0:
        continue
    x2.append(ox2[i])
    y2.append(oy2[i])

x3 =[]
y3=[]
# alpha = 1
ox3 =  [209.09801633605602, 214.1358024691358, 202.39406779661016, 206.9422680412371, 210.60690789473685, 215.250998003992, 214.34976303317535, 212.79146919431278, 215.8132701421801, 224.6118881118881, 210.54320987654322, 213.74098360655736, 213.2100350058343, 223.7328023171615, 221.5920303605313, 233.40951446787642, 222.7563981042654, 222.97175959449675, 225.2523499638467, 224.71821631878558, 216.6449704142012, 227.11697247706422, 223.38684210526316, 236.78393213572855, 244.26022954091817, 218.2327868852459, 226.9852071005917, 227.11697247706422, 236.98104265402844, 226.77704918032788, 225.96610169491527, 225.5241379310345, 240.61851015801355, 226.38862559241707, 226.2825, 246.71686746987953, 241.0930638722555, 256.0416666666667, 243.2172633643943, 247.05055292259084, 256.0416666666667, 265.008316008316, 268.87133182844246, 271.0263355906697, 256.74565560821486, 274.11143451143454, 274.85421686746986, 274.925, 279.73463757210936, 279.4228121927237]
oy3 =  [116.5585897488875, 106.39394016044982, 138.0018209621881, 141.86825562549873, 135.12742808979, 114.24511279889082, 126.10302053444202, 126.1276385471356, 114.82557333353428, 118.41854692122754, 106.39394016044982, 85.53882447833047, 116.5585897488875, 108.21765036814782, 112.96577714198759, 106.06599242290012, 113.89177032738274, 108.21765036814782, 110.0773177373148, 112.03197413583605, 98.36131828835492, 98.16988297514985, 98.22088986154003, 106.53272713346841, 107.26139858826468, 85.5177997094475, 85.38548154239469, 98.1489679890227, 97.67684353102348, 86.31924909786466, 90.22016492299048, 90.94885808987237, 104.63825300902505, 97.1918658555865, 97.05762295523627, 97.36359702115882, 106.49757957264634, 96.94453667045124, 110.75381152028021, 97.76277925176063, 96.94453667045124, 96.41835858460655, 111.39649635439179, 110.87064131796541, 97.76431235270633, 96.37775938941542, 97.24182767584097, 97.31816409036716, 104.88451724550728, 109.09063783658169]
for i in range(len(ox3)):
    if (ox1[i]>213.6 and ox1[i]<213.8):
        continue
    x3.append(ox3[i])
    y3.append(oy3[i])
fig = plt.figure(figsize=(8,6))
c = ["#90C9E7", "#ff7f0e", "#0D6783"]

X = np.concatenate([x1, x2, x3])
Y = np.concatenate([y1, y2, y3])

# ---- Compute the frontier ----
fx1, fy1 = pareto_frontier(x1, y1)
# ---- Plot the frontier curve ----
plt.plot(fx1, fy1, color=c[0], linewidth=1, marker='o', label=r"$\alpha$ = 0.1")
# ---- Compute the frontier ----
fx2, fy2 = pareto_frontier(x2, y2)
# ---- Plot the frontier curve ----
plt.plot(fx2, fy2, color=c[1], linewidth=1, marker='o', label=r"$\alpha$ = 0.5")
# ---- Compute the frontier ----
fx3, fy3 = pareto_frontier(x3, y3)
# ---- Plot the frontier curve ----
plt.plot(fx3, fy3, color=c[2], linewidth=1, marker='o', label=r"$\alpha$ = 1")





# ---- Compute the frontier ----
fx, fy = pareto_frontier(X, Y)
# ---- Plot the frontier curve ----
plt.plot(fx, fy, color='black', linewidth=1.5,linestyle='--',  dashes=(12, 8),label=" overall Frontier")


# **This is the missing line**

plt.scatter(x1, y1, s=20, color=c[0], alpha=0.1, rasterized=True)
plt.scatter(x2, y2, s=20, color=c[1], alpha=0.1, rasterized=True)
plt.scatter(x3, y3, s=20, color=c[2], alpha=0.1, rasterized=True)

plt.xlabel("Time latency (s)", fontsize=14)
plt.ylabel("Energy consumption (J)", fontsize=14)
plt.title("", fontsize=16)
plt.grid(True, linestyle='--', alpha=0.3)

plt.xlim(150, 280)
plt.ylim(80, 180)

plt.legend(loc="upper right")

plt.tight_layout()
plt.show()
fig.savefig("ablation1_1.pdf", dpi=300)